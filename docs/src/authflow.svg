<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 13.0.0 (0)
 -->
<!-- Title: authflow Pages: 1 -->
<svg width="961pt" height="836pt"
 viewBox="0.00 0.00 961.00 836.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 832)">
<title>authflow</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-832 956.62,-832 956.62,4 -4,4"/>
<!-- PageRequest -->
<g id="node1" class="node">
<title>PageRequest</title>
<polygon fill="none" stroke="black" points="706.38,-684 543.38,-684 543.38,-648 706.38,-648 706.38,-684"/>
<text xml:space="preserve" text-anchor="middle" x="624.88" y="-661.33" font-family="Times,serif" font-size="14.00">user requested page</text>
</g>
<!-- Login -->
<g id="node3" class="node">
<title>Login</title>
<polygon fill="none" stroke="black" points="428.88,-612 268.88,-612 268.88,-576 428.88,-576 428.88,-612"/>
<text xml:space="preserve" text-anchor="middle" x="348.88" y="-589.33" font-family="Times,serif" font-size="14.00">user login web page</text>
</g>
<!-- PageRequest&#45;&gt;Login -->
<g id="edge3" class="edge">
<title>PageRequest&#45;&gt;Login</title>
<path fill="none" stroke="black" d="M555.94,-647.52C517.27,-637.71 468.84,-625.43 428.54,-615.21"/>
<polygon fill="black" stroke="black" points="429.43,-611.82 418.88,-612.75 427.71,-618.6 429.43,-611.82"/>
</g>
<!-- apiCallWithJWT -->
<g id="node15" class="node">
<title>apiCallWithJWT</title>
<polygon fill="none" stroke="black" points="803.12,-612 446.62,-612 446.62,-576 803.12,-576 803.12,-612"/>
<text xml:space="preserve" text-anchor="middle" x="624.88" y="-589.33" font-family="Times,serif" font-size="14.00">requested page makes API call with JWT bearer</text>
</g>
<!-- PageRequest&#45;&gt;apiCallWithJWT -->
<g id="edge15" class="edge">
<title>PageRequest&#45;&gt;apiCallWithJWT</title>
<path fill="none" stroke="black" d="M624.88,-647.7C624.88,-640.41 624.88,-631.73 624.88,-623.54"/>
<polygon fill="black" stroke="black" points="628.38,-623.62 624.88,-613.62 621.38,-623.62 628.38,-623.62"/>
</g>
<!-- User -->
<g id="node2" class="node">
<title>User</title>
<polygon fill="none" stroke="black" points="651.88,-828 597.88,-828 597.88,-792 651.88,-792 651.88,-828"/>
<text xml:space="preserve" text-anchor="middle" x="624.88" y="-805.33" font-family="Times,serif" font-size="14.00">user</text>
</g>
<!-- reqProtectedPage -->
<g id="node8" class="node">
<title>reqProtectedPage</title>
<polygon fill="none" stroke="black" points="744.62,-756 505.12,-756 505.12,-720 744.62,-720 744.62,-756"/>
<text xml:space="preserve" text-anchor="middle" x="624.88" y="-733.33" font-family="Times,serif" font-size="14.00">user requests a protected page</text>
</g>
<!-- User&#45;&gt;reqProtectedPage -->
<g id="edge1" class="edge">
<title>User&#45;&gt;reqProtectedPage</title>
<path fill="none" stroke="black" d="M624.88,-791.7C624.88,-784.41 624.88,-775.73 624.88,-767.54"/>
<polygon fill="black" stroke="black" points="628.38,-767.62 624.88,-757.62 621.38,-767.62 628.38,-767.62"/>
</g>
<!-- clickSubmit -->
<g id="node9" class="node">
<title>clickSubmit</title>
<polygon fill="none" stroke="black" points="458.75,-540 313,-540 313,-504 458.75,-504 458.75,-540"/>
<text xml:space="preserve" text-anchor="middle" x="385.88" y="-517.33" font-family="Times,serif" font-size="14.00">user clicks submit</text>
</g>
<!-- Login&#45;&gt;clickSubmit -->
<g id="edge4" class="edge">
<title>Login&#45;&gt;clickSubmit</title>
<path fill="none" stroke="black" d="M358.02,-575.7C362.1,-567.98 367,-558.71 371.54,-550.11"/>
<polygon fill="black" stroke="black" points="374.55,-551.92 376.13,-541.44 368.36,-548.65 374.55,-551.92"/>
</g>
<!-- LoginRoute -->
<g id="node4" class="node">
<title>LoginRoute</title>
<polygon fill="none" stroke="black" points="457.5,-468 328.25,-468 328.25,-432 457.5,-432 457.5,-468"/>
<text xml:space="preserve" text-anchor="middle" x="392.88" y="-445.32" font-family="Times,serif" font-size="14.00">login post route</text>
</g>
<!-- fwdToAPI -->
<g id="node10" class="node">
<title>fwdToAPI</title>
<polygon fill="none" stroke="black" points="484.88,-396 156.88,-396 156.88,-360 484.88,-360 484.88,-396"/>
<text xml:space="preserve" text-anchor="middle" x="320.88" y="-373.32" font-family="Times,serif" font-size="14.00">Login Route forwards request to API server</text>
</g>
<!-- LoginRoute&#45;&gt;fwdToAPI -->
<g id="edge6" class="edge">
<title>LoginRoute&#45;&gt;fwdToAPI</title>
<path fill="none" stroke="black" d="M375.08,-431.7C366.6,-423.45 356.29,-413.43 346.94,-404.35"/>
<polygon fill="black" stroke="black" points="349.41,-401.86 339.8,-397.4 344.53,-406.88 349.41,-401.86"/>
</g>
<!-- redirectWithJWT -->
<g id="node14" class="node">
<title>redirectWithJWT</title>
<polygon fill="none" stroke="black" points="952.62,-396 635.12,-396 635.12,-360 952.62,-360 952.62,-396"/>
<text xml:space="preserve" text-anchor="middle" x="793.88" y="-373.32" font-family="Times,serif" font-size="14.00">user gets redirected back with JWT cookie</text>
</g>
<!-- LoginRoute&#45;&gt;redirectWithJWT -->
<g id="edge13" class="edge">
<title>LoginRoute&#45;&gt;redirectWithJWT</title>
<path fill="none" stroke="black" d="M457.75,-437.68C518.47,-427.08 610.44,-411.02 682.83,-398.38"/>
<polygon fill="black" stroke="black" points="683.08,-401.89 692.33,-396.73 681.87,-395 683.08,-401.89"/>
</g>
<!-- APILogin -->
<g id="node5" class="node">
<title>APILogin</title>
<polygon fill="none" stroke="black" points="323.62,-324 246.12,-324 246.12,-288 323.62,-288 323.62,-324"/>
<text xml:space="preserve" text-anchor="middle" x="284.88" y="-301.32" font-family="Times,serif" font-size="14.00">api login</text>
</g>
<!-- lookupUser -->
<g id="node11" class="node">
<title>lookupUser</title>
<polygon fill="none" stroke="black" points="398.62,-252 135.12,-252 135.12,-216 398.62,-216 398.62,-252"/>
<text xml:space="preserve" text-anchor="middle" x="266.88" y="-229.32" font-family="Times,serif" font-size="14.00">api looks up user by email, subject</text>
</g>
<!-- APILogin&#45;&gt;lookupUser -->
<g id="edge8" class="edge">
<title>APILogin&#45;&gt;lookupUser</title>
<path fill="none" stroke="black" d="M280.43,-287.7C278.53,-280.32 276.27,-271.52 274.14,-263.25"/>
<polygon fill="black" stroke="black" points="277.53,-262.38 271.65,-253.57 270.75,-264.13 277.53,-262.38"/>
</g>
<!-- db -->
<g id="node6" class="node">
<title>db</title>
<polygon fill="none" stroke="black" points="298.12,-180 217.62,-180 217.62,-144 298.12,-144 298.12,-180"/>
<text xml:space="preserve" text-anchor="middle" x="257.88" y="-157.32" font-family="Times,serif" font-size="14.00">database</text>
</g>
<!-- verifyPassword -->
<g id="node12" class="node">
<title>verifyPassword</title>
<polygon fill="none" stroke="black" points="505.75,-108 0,-108 0,-72 505.75,-72 505.75,-108"/>
<text xml:space="preserve" text-anchor="middle" x="252.88" y="-85.33" font-family="Times,serif" font-size="14.00">api verifies the returned password hash against the user&#39;s password</text>
</g>
<!-- db&#45;&gt;verifyPassword -->
<g id="edge10" class="edge">
<title>db&#45;&gt;verifyPassword</title>
<path fill="none" stroke="black" d="M256.64,-143.7C256.12,-136.41 255.5,-127.73 254.91,-119.54"/>
<polygon fill="black" stroke="black" points="258.41,-119.34 254.2,-109.61 251.43,-119.84 258.41,-119.34"/>
</g>
<!-- APICall -->
<g id="node7" class="node">
<title>APICall</title>
<polygon fill="none" stroke="black" points="658.38,-540 591.38,-540 591.38,-504 658.38,-504 658.38,-540"/>
<text xml:space="preserve" text-anchor="middle" x="624.88" y="-517.33" font-family="Times,serif" font-size="14.00">api call</text>
</g>
<!-- reqProtectedPage&#45;&gt;PageRequest -->
<g id="edge2" class="edge">
<title>reqProtectedPage&#45;&gt;PageRequest</title>
<path fill="none" stroke="black" d="M624.88,-719.7C624.88,-712.41 624.88,-703.73 624.88,-695.54"/>
<polygon fill="black" stroke="black" points="628.38,-695.62 624.88,-685.62 621.38,-695.62 628.38,-695.62"/>
</g>
<!-- clickSubmit&#45;&gt;LoginRoute -->
<g id="edge5" class="edge">
<title>clickSubmit&#45;&gt;LoginRoute</title>
<path fill="none" stroke="black" d="M387.61,-503.7C388.33,-496.41 389.2,-487.73 390.02,-479.54"/>
<polygon fill="black" stroke="black" points="393.5,-479.91 391.01,-469.61 386.54,-479.21 393.5,-479.91"/>
</g>
<!-- fwdToAPI&#45;&gt;APILogin -->
<g id="edge7" class="edge">
<title>fwdToAPI&#45;&gt;APILogin</title>
<path fill="none" stroke="black" d="M311.98,-359.7C308.01,-351.98 303.24,-342.71 298.82,-334.11"/>
<polygon fill="black" stroke="black" points="302.05,-332.74 294.36,-325.45 295.82,-335.94 302.05,-332.74"/>
</g>
<!-- lookupUser&#45;&gt;db -->
<g id="edge9" class="edge">
<title>lookupUser&#45;&gt;db</title>
<path fill="none" stroke="black" d="M264.65,-215.7C263.7,-208.32 262.57,-199.52 261.51,-191.25"/>
<polygon fill="black" stroke="black" points="265.01,-191.08 260.27,-181.61 258.07,-191.97 265.01,-191.08"/>
</g>
<!-- returnJWT -->
<g id="node13" class="node">
<title>returnJWT</title>
<polygon fill="none" stroke="black" points="524.25,-36 261.5,-36 261.5,0 524.25,0 524.25,-36"/>
<text xml:space="preserve" text-anchor="middle" x="392.88" y="-13.32" font-family="Times,serif" font-size="14.00">api route returns a json web token</text>
</g>
<!-- verifyPassword&#45;&gt;returnJWT -->
<g id="edge11" class="edge">
<title>verifyPassword&#45;&gt;returnJWT</title>
<path fill="none" stroke="black" d="M287.84,-71.52C306.1,-62.39 328.65,-51.11 348.17,-41.35"/>
<polygon fill="black" stroke="black" points="349.62,-44.54 357,-36.94 346.49,-38.28 349.62,-44.54"/>
</g>
<!-- returnJWT&#45;&gt;LoginRoute -->
<g id="edge12" class="edge">
<title>returnJWT&#45;&gt;LoginRoute</title>
<path fill="none" stroke="black" d="M463,-36.4C482.31,-44.34 501.57,-55.73 514.88,-72 540.48,-103.31 533.88,-120.55 533.88,-161 533.88,-307 533.88,-307 533.88,-307 533.88,-350.37 523.59,-364.42 493.88,-396 482.02,-408.6 466.49,-418.77 451.18,-426.71"/>
<polygon fill="black" stroke="black" points="449.99,-423.39 442.55,-430.93 453.07,-429.68 449.99,-423.39"/>
</g>
<!-- redirectWithJWT&#45;&gt;PageRequest -->
<g id="edge14" class="edge">
<title>redirectWithJWT&#45;&gt;PageRequest</title>
<path fill="none" stroke="black" d="M802.26,-396.38C821.12,-438.29 861.54,-546.3 811.88,-612 799.78,-628 758.61,-640.56 717.97,-649.44"/>
<polygon fill="black" stroke="black" points="717.37,-645.99 708.31,-651.47 718.81,-652.84 717.37,-645.99"/>
</g>
<!-- apiCallWithJWT&#45;&gt;APICall -->
<g id="edge16" class="edge">
<title>apiCallWithJWT&#45;&gt;APICall</title>
<path fill="none" stroke="black" d="M624.88,-575.7C624.88,-568.41 624.88,-559.73 624.88,-551.54"/>
<polygon fill="black" stroke="black" points="628.38,-551.62 624.88,-541.62 621.38,-551.62 628.38,-551.62"/>
</g>
</g>
</svg>
